1.
# create the html directory and mount the efs to it
sudo su
yum update -y
mkdir -p /var/www/html
sudo mount -t nfs4 -o nfsvers=4.1,rsize=1048576,wsize=1048576,hard,timeo=600,retrans=2,noresvport fs-aed8ad5b.efs.us-east-1.amazonaws.com:/ /var/www/html


2.
# install apache 
sudo yum install -y httpd httpd-tools mod_ssl
sudo systemctl enable httpd 
sudo systemctl start httpd

3
# install php 7.4
sudo yum install php8.1* -y
sudo yum clean metadata
sudo yum install php php-common php-pear -y




5
# set permissions
sudo usermod -a -G apache ec2-user
sudo chown -R ec2-user:apache /var/www
sudo chmod 2775 /var/www && find /var/www -type d -exec sudo chmod 2775 {} \;
sudo find /var/www -type f -exec sudo chmod 0664 {} \;
chown apache:apache -R /var/www/html 

6.
# download wordpress files
wget https://wordpress.org/latest.zip
unzip latest.zip
cp -r wordpress/* /var/www/html/


7.
# create the wp-config.php file
cp /var/www/html/wp-config-sample.php /var/www/html/wp-config.php


8.
# edit the wp-config.php file
nano /var/www/html/wp-config.php

sudo chown -R apache:apache /var/www/html/
sudo chmod -R 755 /var/www/html/

9
# restart the webserver
service httpd restart

